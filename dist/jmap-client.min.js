!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jmap=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={Client:a("./client/Client"),Utils:a("./utils/Utils"),JSONBuilder:a("./utils/JSONBuilder"),PromiseProvider:a("./promises/PromiseProvider"),ES6PromiseProvider:a("./promises/ES6PromiseProvider"),QPromiseProvider:a("./promises/QPromiseProvider"),Transport:a("./transport/Transport"),JQueryTransport:a("./transport/JQueryTransport"),RequestTransport:a("./transport/RequestTransport"),Model:a("./models/Model"),Account:a("./models/Account"),EMailer:a("./models/EMailer"),Mailbox:a("./models/Mailbox"),MessageList:a("./models/MessageList"),Message:a("./models/Message"),OutboundMessage:a("./models/OutboundMessage"),CreateMessageAck:a("./models/CreateMessageAck"),Thread:a("./models/Thread"),MailboxRole:a("./models/MailboxRole"),SetResponse:a("./models/SetResponse"),AuthAccess:a("./models/AuthAccess"),AuthContinuation:a("./models/AuthContinuation"),AuthMethod:a("./models/AuthMethod"),Constants:a("./utils/Constants"),Attachment:a("./models/Attachment"),AccountCapabilities:a("./models/AccountCapabilities"),Capabilities:a("./models/Capabilities"),MailCapabilities:a("./models/MailCapabilities"),VacationResponse:a("./models/VacationResponse"),TransportError:a("./errors/TransportError"),JmapError:a("./errors/JmapError")},b.exports=c.default},{"./client/Client":2,"./errors/JmapError":3,"./errors/TransportError":4,"./models/Account":5,"./models/AccountCapabilities":6,"./models/Attachment":7,"./models/AuthAccess":8,"./models/AuthContinuation":9,"./models/AuthMethod":10,"./models/Capabilities":11,"./models/CreateMessageAck":12,"./models/EMailer":13,"./models/MailCapabilities":14,"./models/Mailbox":15,"./models/MailboxRole":16,"./models/Message":17,"./models/MessageList":18,"./models/Model":19,"./models/OutboundMessage":20,"./models/SetResponse":21,"./models/Thread":22,"./models/VacationResponse":23,"./promises/ES6PromiseProvider":24,"./promises/PromiseProvider":25,"./promises/QPromiseProvider":26,"./transport/JQueryTransport":27,"./transport/RequestTransport":28,"./transport/Transport":29,"./utils/Constants":30,"./utils/JSONBuilder":31,"./utils/Utils":32}],2:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}function g(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var h=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("./../promises/ES6PromiseProvider.js"),k=d(j),l=a("./../utils/Utils.js"),m=d(l),n=a("./../models/Account.js"),o=d(n),p=a("./../models/Mailbox.js"),q=d(p),r=a("./../models/MessageList.js"),s=d(r),t=a("./../models/SetResponse.js"),u=d(t),v=a("./../models/Thread.js"),w=d(v),x=a("./../models/Message.js"),y=d(x),z=a("./../models/OutboundMessage.js"),A=d(z),B=a("./../models/CreateMessageAck.js"),C=d(B),D=a("./../models/MailboxRole.js"),E=d(D),F=a("./../models/AuthContinuation.js"),G=d(F),H=a("./../models/AuthAccess.js"),I=d(H),J=a("../utils/Constants.js"),K=d(J),L=a("./../models/VacationResponse"),M=d(L),N=a("../errors/JmapError"),O=d(N),P=function(){function a(b,c){g(this,a),m.default.assertRequiredParameterIsPresent(b,"transport"),this.promiseProvider=c||new k.default,this.transport=b,this.transport.promiseProvider=this.promiseProvider}return i(a,[{key:"withAuthenticationUrl",value:function(a){return this.authenticationUrl=a,this}},{key:"withAuthenticationToken",value:function(a,b){return this.authToken=a,this.authScheme=b,this}},{key:"withAPIUrl",value:function(a){return this.apiUrl=a,this}},{key:"withDownloadUrl",value:function(a){return this.downloadUrl=a,this}},{key:"withAuthAccess",value:function(a){var b=this;return m.default.assertRequiredParameterHasType(a,"access",I.default),this.authScheme="X-JMAP",this.authToken=a.accessToken,["username","apiUrl","eventSourceUrl","uploadUrl","downloadUrl","versions","extensions"].forEach(function(c){b[c]=a[c]}),this}},{key:"authenticate",value:function(a,b,c){var d=this;return this.transport.post(this.authenticationUrl,this._defaultNonAuthenticatedHeaders(),{username:a,deviceName:b,clientName:K.default.CLIENT_NAME,clientVersion:K.default.VERSION}).then(function(a){return d._authenticateResponse(a,c)})}},{key:"_authenticateResponse",value:function(a,b){var c=this;if(a.loginId&&void 0===a.accessToken){var d=new G.default(a);return b(d).then(function(a){if(!d.supports(a.type))throw new Error('The "'+a.type+'" authentication type is not supported by the server.');var b={loginId:d.loginId,type:a.type};return a.value&&(b.value=a.value),c.transport.post(c.authenticationUrl,c._defaultNonAuthenticatedHeaders(),b)}).then(function(a){return c._authenticateResponse(a,b)})}if(a.accessToken&&void 0===a.loginId)return new I.default(a);throw new Error("Unexpected response on authorization request")}},{key:"authExternal",value:function(a,b,c){return this.authenticate(a,b,function(a){return c(a).then(function(){return{type:"external"}})})}},{key:"authPassword",value:function(a,b,c){return this.authenticate(a,c,function(){return this.promiseProvider.newPromise(function(a,c){a({type:"password",value:b})})}.bind(this))}},{key:"getAccounts",value:function(a){return this._jmapRequest("getAccounts",a)}},{key:"getMailboxes",value:function(a){return this._jmapRequest("getMailboxes",a)}},{key:"setMailboxes",value:function(a){return this._jmapRequest("setMailboxes",a)}},{key:"createMailbox",value:function(a,b){var c=this;m.default.assertRequiredParameterIsPresent(a,"name");var d=this._generateClientId();return this.setMailboxes({create:f({},d,{name:a,parentId:b})}).then(function(b){var e=b.created[d];if(!e)throw new Error("Failed to create mailbox, clientId: "+d+", message: "+(b.notCreated[d]||"none"));return new q.default(c,e.id,e.name||a,e)})}},{key:"updateMailbox",value:function(a,b){return m.default.assertRequiredParameterIsPresent(a,"id"),this.setMailboxes({update:f({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update mailbox "+a+", the reason is: "+b.notUpdated[a])})}},{key:"destroyMailbox",value:function(a){return m.default.assertRequiredParameterIsPresent(a,"id"),this.destroyMailboxes([a])}},{key:"destroyMailboxes",value:function(a){return m.default.assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMailboxes({destroy:a}).then(function(a){var b=Object.keys(a.notDestroyed);if(b.length>0){var c=a.notDestroyed[b[0]],d=c.type+" ("+c.description+")";throw new Error("Failed to destroy "+b[0]+", the reason is: "+d)}})}},{key:"getMailboxWithRole",value:function(a,b){if(a instanceof E.default||(a=E.default.fromRole(a)),a===E.default.UNKNOWN)throw new Error("A valid role is required to find a mailbox by role");return this._jmapRequest("getMailboxes",b).then(function(b){for(var c=0;c<b.length;c++)if(b[c].role===a)return b[c];throw new Error("Cannot find a mailbox with role "+a.value)})}},{key:"getMessageList",value:function(a){return this._jmapRequest("getMessageList",a)}},{key:"getThreads",value:function(a){return this._jmapRequest("getThreads",a)}},{key:"getMessages",value:function(a){return this._jmapRequest("getMessages",a)}},{key:"setMessages",value:function(a){return this._jmapRequest("setMessages",a)}},{key:"updateMessage",value:function(a,b){return m.default.assertRequiredParameterIsPresent(a,"id"),m.default.assertRequiredParameterIsObject(b,"options"),this.setMessages({update:f({},a,b)}).then(function(b){if(b.updated.indexOf(a)<0)throw new Error("Failed to update message "+a+", the reason is: "+(b.notUpdated[a]||"missing"))})}},{key:"destroyMessage",value:function(a){return this.destroyMessages(a&&[a]).then(function(b){if(b.destroyed.indexOf(a)<0)throw new Error("Failed to destroy "+a+", the reason is: "+(b.notDestroyed[a]||"missing"))})}},{key:"destroyMessages",value:function(a){return m.default.assertRequiredParameterIsArrayWithMinimumLength(a,"ids",1),this.setMessages({destroy:a})}},{key:"saveAsDraft",value:function(a){return this._createMessage(a,E.default.DRAFTS)}},{key:"send",value:function(a,b){return this._createMessage(a,E.default.OUTBOX,b)}},{key:"moveMessage",value:function(a,b){return m.default.assertRequiredParameterIsPresent(a,"id"),m.default.assertRequiredParameterIsArrayWithMinimumLength(b,"mailboxIds",1),this.updateMessage(a,{mailboxIds:b})}},{key:"getVacationResponse",value:function(a){return this._jmapRequest("getVacationResponse",a).then(function(a){return a[0]})}},{key:"setVacationResponse",value:function(a,b){return m.default.assertRequiredParameterHasType(a,"vacationResponse",M.default),this._jmapRequest("setVacationResponse",{accountId:b&&b.accountId,update:f({},M.default.ID,a.toJSONObject())}).then(function(a){if(a.updated.indexOf(M.default.ID)<0)throw new Error("Failed to set vacation response. Error: "+(a.notUpdated[M.default.ID]||"none"))})}},{key:"_createMessage",value:function(a,b,c){var d=this;m.default.assertRequiredParameterHasType(a,"message",A.default);var g=this._generateClientId(),i=function(c){a.mailboxIds=[c.id];var i=a.keywords||{},j=(i.$Draft,e(i,["$Draft"]));return a.keywords=E.default.DRAFTS.value===b.value?h({},j,{$Draft:!0}):h({},j),d.setMessages({create:f({},g,a.toJSONObject())}).then(function(a){if(!a.created[g])throw new Error("Failed to store message with clientId "+g+". Error: "+(a.notCreated[g]||"none"));return new C.default(d,a.created[g])})};return c?i(c):this.getMailboxWithRole(b).then(i)}},{key:"_generateClientId",value:function(){return Date.now()}},{key:"_defaultNonAuthenticatedHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8"}}},{key:"_defaultHeaders",value:function(){return{Accept:"application/json; charset=UTF-8","Content-Type":"application/json; charset=UTF-8",Authorization:(this.authScheme?this.authScheme+" ":"")+this.authToken}}},{key:"_jmapRequest",value:function(a,b){var c=this;return this.transport.post(this.apiUrl,this._defaultHeaders(),[[a,b||{},"#0"]]).then(function(b){return m.default.assertValidJMAPResponse(a,b)}).then(function(b){return b.map(function(b){return c._handleResponse(b,a)})}).then(function(a){return a.length>1?a:a[0]})}},{key:"_handleResponse",value:function(a,b){var c=a[0],d=this["_handle"+m.default.capitalize(c)+"Response"];return d?d.bind(this)(a,b):a[1]}},{key:"_handleErrorResponse",value:function(a,b){throw new O.default(a[1],b)}},{key:"_handleListResponse",value:function(a,b,c){return m.default._jsonArrayToModelList(this,b,a[1].list,c)}},{key:"_handleSetResponse",value:function(a){return u.default.fromJSONObject(this,a[1])}},{key:"_handleAccountsResponse",value:function(a){return this._handleListResponse(a,o.default)}},{key:"_handleThreadsResponse",value:function(a){return this._handleListResponse(a,w.default)}},{key:"_handleMessagesResponse",value:function(a){return this._handleListResponse(a,y.default,function(a){try{return m.default.assertRequiredParameterIsArrayWithMinimumLength(a.mailboxIds,"mailboxIds",1)}catch(a){return!1}})}},{key:"_handleMailboxesResponse",value:function(a){return this._handleListResponse(a,q.default)}},{key:"_handleMailboxesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleMessageListResponse",value:function(a){return s.default.fromJSONObject(this,a[1])}},{key:"_handleMessagesSetResponse",value:function(a){return this._handleSetResponse(a)}},{key:"_handleVacationResponseResponse",value:function(a){return this._handleListResponse(a,M.default)}},{key:"_handleVacationResponseSetResponse",value:function(a){return this._handleSetResponse(a)}}]),a}();c.default=P,b.exports=c.default},{"../errors/JmapError":3,"../utils/Constants.js":30,"./../models/Account.js":5,"./../models/AuthAccess.js":8,"./../models/AuthContinuation.js":9,"./../models/CreateMessageAck.js":12,"./../models/Mailbox.js":15,"./../models/MailboxRole.js":16,"./../models/Message.js":17,"./../models/MessageList.js":18,"./../models/OutboundMessage.js":20,"./../models/SetResponse.js":21,"./../models/Thread.js":22,"./../models/VacationResponse":23,"./../promises/ES6PromiseProvider.js":24,"./../utils/Utils.js":32}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){function b(){a.apply(this,arguments)}return b.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b}Object.defineProperty(c,"__esModule",{value:!0});var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../utils/Utils"),k=d(j),l=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return k.default.assertRequiredParameterIsPresent(a,"payload"),k.default.assertRequiredParameterIsPresent(a.type,"payload.type"),d.payload=a,d.type=a.type,d.description=a.description||null,d.method=c||null,d}return g(b,a),i(b,[{key:"toString",value:function(){return"JmapError{type="+this.type+",description="+this.description+",method="+this.method+"}"}}]),b}(h(Error));c.default=l,b.exports=c.default},{"../utils/Utils":32}],4:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function f(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function g(a){function b(){a.apply(this,arguments)}return b.prototype=Object.create(a.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(b,a):b.__proto__=a,b}Object.defineProperty(c,"__esModule",{value:!0});var h=function(a){function b(a,c,f){d(this,b);var g=e(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return g.cause=a||null,g.statusCode=c||0,g.responseText=f||null,g}return f(b,a),b}(g(Error));c.default=h,b.exports=c.default},{}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Capabilities"),n=d(m),o=a("./MailCapabilities"),p=d(o),q=a("./AccountCapabilities"),r=d(q),s=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"id"),d=d||{},g.id=c,g.name=d.name||"",g.isPrimary=d.isPrimary||!1,g.capabilities=l.default._nullOrNewInstance(d.capabilities,r.default),g.mail=l.default._nullOrNewInstance(d.mail,p.default),g.contacts=l.default._nullOrNewInstance(d.contacts,n.default),g.calendars=l.default._nullOrNewInstance(d.calendars,n.default),g}return g(b,a),h(b,[{key:"hasMail",value:function(){return null!==this.mail}},{key:"hasCalendars",value:function(){return null!==this.calendars}},{key:"hasContacts",value:function(){return null!==this.contacts}},{key:"getMailboxes",value:function(a){return a=a||{},a.accountId=this.id,this._jmap.getMailboxes(a)}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j.default);c.default=s,b.exports=c.default},{"../utils/Utils.js":32,"./AccountCapabilities":6,"./Capabilities":11,"./MailCapabilities":14,"./Model.js":19}],6:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a),b=b||{},this.maxSizeUpload=b.maxSizeUpload||0};c.default=e,b.exports=c.default},{}],7:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"blobId"),d=d||{},g.blobId=c,g.type=d.type||null,g.name=d.name||null,g.size=d.size||0,g.cid=d.cid||null,g.isInline=d.isInline||!1,g.width=d.width||null,g.height=d.height||null,g.url=d.url||null,!g.url&&a.downloadUrl&&(g.url=l.default.fillURITemplate(a.downloadUrl,{blobId:g.blobId,name:g.name||g.blobId})),g}return g(b,a),h(b,[{key:"getSignedDownloadUrl",value:function(){return l.default.assertRequiredParameterIsPresent(this.url,"url"),this._jmap.transport.post(this.url,this._jmap._defaultHeaders(),null,!0).then(l.default.appendQueryParameter.bind(null,this.url,"access_token"))}},{key:"toJSONObject",value:function(){return(new n.default).appendIfDefined("blobId",this.blobId).appendIfDefined("type",this.type).appendIfDefined("name",this.name).appendIfDefined("size",this.size).appendIfDefined("cid",this.cid).appendIfDefined("width",this.width).appendIfDefined("height",this.height).appendIfDefined("url",this.url).appendIfDefined("isInline",this.isInline).build()}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.blobId,c)}}]),b}(j.default);c.default=o,b.exports=c.default},{"../utils/JSONBuilder.js":31,"../utils/Utils.js":32,"./Model.js":19}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=a("../utils/Utils.js"),g=d(f),h=function a(b){e(this,a),g.default.assertRequiredParameterIsPresent(b,"payload"),["username","accessToken","apiUrl","eventSourceUrl","uploadUrl","downloadUrl"].forEach(function(a){g.default.assertRequiredParameterIsPresent(b[a],a)}),this.username=b.username,this.versions=b.versions||[],this.extensions=b.extensions||{},this.accessToken=b.accessToken,this.apiUrl=b.apiUrl,this.eventSourceUrl=b.eventSourceUrl,this.uploadUrl=b.uploadUrl,this.downloadUrl=b.downloadUrl};c.default=h,b.exports=c.default},{"../utils/Utils.js":32}],9:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=d(g),i=a("./AuthMethod"),j=d(i),k=function(){function a(b){e(this,a),h.default.assertRequiredParameterIsPresent(b,"payload"),h.default.assertRequiredParameterIsPresent(b.loginId,"loginId"),h.default.assertRequiredParameterIsArrayWithMinimumLength(b.methods,"methods"),this.loginId=b.loginId,this.methods=b.methods.map(function(a){return new j.default(a)}),this.prompt=b.prompt||null}return f(a,[{key:"getMethod",value:function(a){h.default.assertRequiredParameterHasType(a,"type","string");var b=null;if(this.methods.forEach(function(c){c.type===a&&(b=c)}),!b)throw new Error('No AuthMethod of type "'+a+'" found');return b}},{key:"supports",value:function(a){h.default.assertRequiredParameterHasType(a,"type","string");var b=!1;try{this.getMethod(a),b=!0}catch(a){}return b}}]),a}();c.default=k,b.exports=c.default},{"../utils/Utils.js":32,"./AuthMethod":10}],10:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},g=a("../utils/Utils.js"),h=d(g),i=function a(b){e(this,a),h.default.assertRequiredParameterIsPresent(b,"payload"),h.default.assertRequiredParameterHasType(b.type,"type","string"),f(this,b)};c.default=i,b.exports=c.default},{"../utils/Utils.js":32}],11:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a),b=b||{},this.isReadOnly=!!b.isReadOnly};c.default=e,b.exports=c.default},{}],12:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Model.js"),i=d(h),j=a("../utils/Utils.js"),k=d(j),l=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return k.default.assertRequiredParameterIsObject(c,"response"),k.default.assertRequiredParameterIsPresent(c.blobId,"response.blobId"),k.default.assertRequiredParameterHasType(c.size,"response.size","number"),d.id=c.id,d.blobId=c.blobId,d.size=c.size,d.threadId=c.threadId,d}return g(b,a),b}(i.default);c.default=l,b.exports=c.default},{"../utils/Utils.js":32,"./Model.js":19}],13:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),b=b||{},this.name=b.name||"",this.email=b.email||"@"}return e(a,null,[{key:"unknown",value:function(){return new a}},{key:"fromJSONObject",value:function(b,c){return new a(c)}}]),a}();c.default=f,b.exports=c.default},{}],14:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=a("./Capabilities"),i=d(h),j=function(a){function b(a){e(this,b),a=a||{};var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c.maxSizeMessageAttachments=a.maxSizeMessageAttachments||0,c.canDelaySend=!!a.canDelaySend,c.messageListSortOptions=a.messageListSortOptions||[],c}return g(b,a),b}(i.default);c.default=j,b.exports=c.default},{"./Capabilities":11}],15:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./MailboxRole.js"),n=d(m),o=function(a){function b(a,c,d,g){e(this,b);var h=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"id"),l.default.assertRequiredParameterIsPresent(d,"name"),g=g||{},h.id=c,h.name=d,h.parentId=g.parentId||null,h.role=n.default.fromRole(g.role),h.sortOrder=g.sortOrder||0,h.mustBeOnlyMailbox=g.mustBeOnlyMailbox||!1,h.mayReadItems=g.mayReadItems||!1,h.mayAddItems=g.mayAddItems||!1,h.mayRemoveItems=g.mayRemoveItems||!1,h.mayCreateChild=g.mayCreateChild||!1,h.mayRename=g.mayRename||!1,h.mayDelete=g.mayDelete||!1,h.totalMessages=g.totalMessages||0,h.unreadMessages=g.unreadMessages||0,h.totalThreads=g.totalThreads||0,h.unreadThreads=g.unreadThreads||0,h}return g(b,a),h(b,[{key:"getMessageList",value:function(a){return a=a||{},a.filter={inMailboxes:[this.id]},this._jmap.getMessageList(a)}},{key:"update",value:function(a){return this._jmap.updateMailbox(this.id,a)}},{key:"destroy",value:function(){return this._jmap.destroyMailbox(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.name,c)}}]),b}(j.default);c.default=o,b.exports=c.default},{"../utils/Utils.js":32,"./MailboxRole.js":16,"./Model.js":19}],16:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this.value=b}return e(a,null,[{key:"fromRole",value:function(b){if(b)for(var c in a)if(a.hasOwnProperty(c)&&a[c].value===b)return a[c];return a.UNKNOWN}}]),a}();["inbox","archive","drafts","outbox","sent","trash","spam","templates"].forEach(function(a){f[a.toUpperCase()]=new f(a)}),f.UNKNOWN=new f(null),c.default=f,b.exports=c.default},{}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){var c={};for(var d in a)b.indexOf(d)>=0||Object.prototype.hasOwnProperty.call(a,d)&&(c[d]=a[d]);return c}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var i=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(a[d]=c[d])}return a},j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("./Model.js"),l=d(k),m=a("./EMailer.js"),n=d(m),o=a("../utils/Utils.js"),p=d(o),q=a("./Attachment.js"),r=d(q),s=function(a){function b(a,c,d,e,h,i){f(this,b);var j=g(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return p.default.assertRequiredParameterIsPresent(c,"id"),p.default.assertRequiredParameterIsPresent(d,"blobId"),p.default.assertRequiredParameterIsPresent(e,"threadId"),
p.default.assertRequiredParameterIsArrayWithMinimumLength(h,"mailboxIds",1),i=i||{},j.id=c,j.blobId=d,j.threadId=e,j.mailboxIds=h,j.inReplyToMessageId=i.inReplyToMessageId||null,j.keywords=i.keywords||{},j.hasAttachment=i.hasAttachment||!1,j.headers=i.headers||{},j.from=p.default._jsonArrayToModelList(a,n.default,Array.isArray(i.from)?i.from:[i.from])[0],j.to=p.default._jsonArrayToModelList(a,n.default,i.to),j.cc=p.default._jsonArrayToModelList(a,n.default,i.cc),j.bcc=p.default._jsonArrayToModelList(a,n.default,i.bcc),j.replyTo=i.replyTo||[],j.subject=i.subject||null,j.date=i.date?new Date(i.date):null,j.size=i.size||0,j.preview=i.preview||null,j.textBody=i.textBody||null,j.htmlBody=i.htmlBody||null,j.attachments=p.default._jsonArrayToModelList(a,r.default,i.attachments),j}return h(b,a),j(b,[{key:"move",value:function(a){return this._jmap.moveMessage(this.id,a)}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"update",value:function(a){return this._jmap.updateMessage(this.id,a)}},{key:"setIsFlagged",value:function(a){p.default.assertRequiredParameterHasType(a,"isFlagged","boolean");var b=this.keywords,c=(b.$Flagged,e(b,["$Flagged"]));return this.update(a?{keywords:i({},c,{$Flagged:a})}:{keywords:i({},c)})}},{key:"setIsUnread",value:function(a){p.default.assertRequiredParameterHasType(a,"isUnread","boolean");var b=this.keywords,c=(b.$Seen,e(b,["$Seen"]));return this.update(a?{keywords:i({},c)}:{keywords:i({},c,{$Seen:!a})})}},{key:"setIsAnswered",value:function(a){p.default.assertRequiredParameterHasType(a,"isAnswered","boolean");var b=this.keywords,c=(b.$Answered,e(b,["$Answered"]));return this.update(a?{keywords:i({},c,{$Answered:a})}:{keywords:i({},c)})}},{key:"destroy",value:function(){return this._jmap.destroyMessage(this.id)}}],[{key:"fromJSONObject",value:function(a,c){return p.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c.blobId,c.threadId,c.mailboxIds,c)}}]),b}(l.default);c.default=s,b.exports=c.default},{"../utils/Utils.js":32,"./Attachment.js":7,"./EMailer.js":13,"./Model.js":19}],18:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.accountId=c.accountId||"",d.filter=c.filter||null,d.sort=c.sort||null,d.collapseThreads=c.collapseThreads||!1,d.position=c.position||0,d.total=c.total||0,d.threadIds=c.threadIds||[],d.messageIds=c.messageIds||[],d}return g(b,a),h(b,[{key:"getThreads",value:function(a){return a=a||{},a.ids=this.threadIds,this._jmap.getThreads(a)}},{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j.default);c.default=m,b.exports=c.default},{"../utils/Utils.js":32,"./Model.js":19}],19:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function a(b){d(this,a),this._jmap=b};c.default=e,b.exports=c.default},{}],20:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("./Attachment.js"),n=d(m),o=a("../utils/JSONBuilder.js"),p=d(o),q=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.mailboxIds=c.mailboxIds||[],d.inReplyToMessageId=c.inReplyToMessageId||null,d.keywords=c.keywords,d.headers=c.headers||null,d.from=c.from||null,d.to=c.to||null,d.cc=c.cc||null,d.bcc=c.bcc||null,d.replyTo=c.replyTo||null,d.subject=c.subject||null,d.textBody=c.textBody||null,d.htmlBody=c.htmlBody||null,d.attachments=l.default._jsonArrayToModelList(a,n.default,c.attachments),d}return g(b,a),h(b,[{key:"toJSONObject",value:function(){return(new p.default).appendIfNotEmpty("mailboxIds",this.mailboxIds).appendIfDefined("inReplyToMessageId",this.inReplyToMessageId).appendIfDefined("keywords",this.keywords).appendIfDefined("headers",this.headers).appendIfDefined("from",this.from).appendIfDefined("to",this.to).appendIfDefined("cc",this.cc).appendIfDefined("bcc",this.bcc).appendIfDefined("replyTo",this.replyTo).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).appendIfNotEmpty("attachments",this.attachments).build()}}]),b}(j.default);c.default=q,b.exports=c.default},{"../utils/JSONBuilder.js":31,"../utils/Utils.js":32,"./Attachment.js":7,"./Model.js":19}],21:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../errors/JmapError"),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.accountId=c.accountId||null,d.oldState=c.oldState||null,d.newState=c.newState||"",d.created=c.created||{},d.updated=c.updated||[],d.destroyed=c.destroyed||[],d.notCreated=b._mapSetErrorsToJmapErrors(c.notCreated||{}),d.notUpdated=b._mapSetErrorsToJmapErrors(c.notUpdated||{}),d.notDestroyed=b._mapSetErrorsToJmapErrors(c.notDestroyed||{}),d}return g(b,a),h(b,null,[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}},{key:"_mapSetErrorsToJmapErrors",value:function(a){var b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=new n.default(a[c]));return b}}]),b}(j.default);c.default=o,b.exports=c.default},{"../errors/JmapError":3,"../utils/Utils.js":32,"./Model.js":19}],22:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=function(a){function b(a,c,d){e(this,b);var g=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return l.default.assertRequiredParameterIsPresent(c,"id"),d=d||{},g.id=c,g.messageIds=d.messageIds||[],g}return g(b,a),h(b,[{key:"getMessages",value:function(a){return a=a||{},a.ids=this.messageIds,this._jmap.getMessages(a)}},{key:"setIsFlagged",value:function(a){return l.default.assertRequiredParameterHasType(a,"isFlagged","boolean"),this._updateAllMessages({keywords:{$Flagged:a}})}},{key:"setIsUnread",value:function(a){return l.default.assertRequiredParameterHasType(a,"isUnread","boolean"),this._updateAllMessages({keywords:{$Seen:!a}})}},{key:"move",value:function(a){return this._updateAllMessages({mailboxIds:a})}},{key:"moveToMailboxWithRole",value:function(a){var b=this;return this._jmap.getMailboxWithRole(a).then(function(a){return b.move([a.id])})}},{key:"destroy",value:function(){return this._jmap.destroyMessages(this.messageIds)}},{key:"_updateAllMessages",value:function(a){var b={};return this.messageIds.forEach(function(c){b[c]=a}),this._jmap.setMessages({update:b})}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c.id,c)}}]),b}(j.default);c.default=m,b.exports=c.default},{"../utils/Utils.js":32,"./Model.js":19}],23:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Model.js"),j=d(i),k=a("../utils/Utils.js"),l=d(k),m=a("../utils/JSONBuilder.js"),n=d(m),o=function(a){function b(a,c){e(this,b);var d=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,a));return c=c||{},d.id=b.ID,d.isEnabled=c.isEnabled||!1,d.isActivated=c.isActivated||!1,d.fromDate=c.fromDate?new Date(c.fromDate):null,d.toDate=c.toDate?new Date(c.toDate):null,d.subject=c.subject||null,d.textBody=c.textBody||null,d.htmlBody=c.htmlBody||null,d}return g(b,a),h(b,[{key:"toJSONObject",value:function(){return(new n.default).append("id",this.id).append("isEnabled",this.isEnabled).appendDateIfDefined("fromDate",this.fromDate).appendDateIfDefined("toDate",this.toDate).appendIfDefined("subject",this.subject).appendIfDefined("textBody",this.textBody).appendIfDefined("htmlBody",this.htmlBody).build()}}],[{key:"fromJSONObject",value:function(a,c){return l.default.assertRequiredParameterIsPresent(c,"object"),new b(a,c)}}]),b}(j.default);o.ID="singleton",c.default=o,b.exports=c.default},{"../utils/JSONBuilder.js":31,"../utils/Utils.js":32,"./Model.js":19}],24:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./PromiseProvider.js"),j=d(i),k=function(a){function b(){return e(this,b),f(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return g(b,a),h(b,[{key:"newPromise",value:function(a){return new Promise(a)}}]),b}(j.default);c.default=k,b.exports=c.default},{"./PromiseProvider.js":25}],25:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"newPromise",value:function(a){throw new Error("PromiseProvider is an abstract class. Please use a concrete implementation.")}}]),a}();c.default=f,b.exports=c.default},{}],26:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./PromiseProvider.js"),j=d(i),k=function(b){function c(){return e(this,c),f(this,(c.__proto__||Object.getPrototypeOf(c)).apply(this,arguments))}return g(c,b),h(c,[{key:"newPromise",value:function(b){return a("q").Promise(b)}}]),c}(j.default);c.default=k,b.exports=c.default},{"./PromiseProvider.js":25,q:"q"}],27:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Transport.js"),j=d(i),k=a("../errors/TransportError"),l=d(k),m=function(a){function b(a){e(this,b);var c=f(this,(b.__proto__||Object.getPrototypeOf(b)).call(this));return c.promiseProvider=a,c}return g(b,a),h(b,[{key:"post",value:function(a,b,c,d){return this.promiseProvider.newPromise(function(e,f){jQuery.ajax({url:a,method:"POST",headers:b,data:d?c:JSON.stringify(c),dataType:d?void 0:"json",processData:!1,jsonp:!1}).done(e).fail(function(a,b,c){return f(new l.default(c,a.status,a.responseText))})})}}]),b}(j.default);c.default=m,b.exports=c.default},{"../errors/TransportError":4,"./Transport.js":29}],28:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}Object.defineProperty(c,"__esModule",{value:!0});var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Transport"),j=d(i),k=a("../errors/TransportError"),l=d(k),m=a("../utils/Constants"),n=function(b){function c(a){e(this,c);var b=f(this,(c.__proto__||Object.getPrototypeOf(c)).call(this));return b.promiseProvider=a,b}return g(c,b),h(c,[{key:"post",value:function(b,c,d,e){return this.promiseProvider.newPromise(function(f,g){a("request")({url:b,headers:c,method:"POST",body:d,json:!e},function(a,b,c){return a||m.SUCCESS_RESPONSE_CODES.indexOf(b.statusCode)<0?g(new l.default(a,b&&b.statusCode,c)):void f(c)})})}}]),c}(j.default);c.default=n,b.exports=c.default},{"../errors/TransportError":4,"../utils/Constants":30,"./Transport":29,request:"request"}],29:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(){d(this,a)}return e(a,[{key:"post",value:function(a,b,c,d){throw new Error("Transport is an abstract class. Please use a concrete implementation.")}}]),a}();c.default=f,b.exports=c.default},{}],30:[function(a,b,c){"use strict";Object.defineProperty(c,"__esModule",{value:!0}),c.default={VERSION:"0.0.25-dev",CLIENT_NAME:"jmap-client (https://github.com/linagora/jmap-client)",SUCCESS_RESPONSE_CODES:[200,201],ERROR:"error"},b.exports=c.default},{}],31:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{default:a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../utils/Utils.js"),h=d(g),i=function(){function a(){e(this,a),this.result={}}return f(a,[{key:"append",value:function(a,b){return h.default.assertRequiredParameterIsPresent(a,"name"),h.default.assertRequiredParameterIsPresent(b,"value"),this.result[a]=b,this}},{key:"appendIfDefined",value:function(a,b){return h.default.isDefined(b)&&this.append(a,b),this}},{key:"appendDateIfDefined",value:function(a,b){return h.default.isDefined(b)&&(h.default.assertRequiredParameterHasType(b,"date",Date),this.append(a,b.toISOString().replace(/.\d+Z/,"Z"))),this}},{key:"appendIfNotEmpty",value:function(a,b){return b&&(h.default.assertRequiredParameterIsArrayWithMinimumLength(b,a),b.length>0&&this.append(a,b.map(function(a){return a.toJSONObject?a.toJSONObject():a}))),this}},{key:"build",value:function(){return this.result}}]),a}();c.default=i,b.exports=c.default},{"../utils/Utils.js":32}],32:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(c,"__esModule",{value:!0});var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./Constants"),h=function(){function a(){throw d(this,a),new Error("The Utils class cannot be instantiated.")}return f(a,null,[{key:"isDefined",value:function(a){return"undefined"!=typeof a&&null!==a}},{key:"assertRequiredParameterIsPresent",value:function(b,c){if(!a.isDefined(b))throw new Error('The "'+c+'" parameter is required.');return b}},{key:"assertRequiredParameterIsObject",value:function(b,c){if(a.assertRequiredParameterIsPresent(b,c),"object"!==("undefined"==typeof b?"undefined":e(b))||Array.isArray(b))throw new Error('The "'+c+'" parameter is not an object.');return b}},{key:"assertRequiredParameterHasType",value:function(b,c,d){if(a.assertRequiredParameterIsPresent(b,c),"string"==typeof d){if(("undefined"==typeof b?"undefined":e(b))!==d)throw new Error('The "'+c+'" parameter has not the expected type: '+d)}else if(!(b instanceof d))throw new Error('The "'+c+'" parameter has not the expected type: '+d);return b}},{key:"assertRequiredParameterIsArrayWithMinimumLength",value:function(a,b,c){if(!Array.isArray(a))throw new Error('The "'+b+'" parameter must be an Array.');if(c&&a.length<c)throw new Error('The "'+b+'" parameter must have at least '+c+" element(s).");return a}},{key:"assertValidJMAPResponse",value:function(b,c){function d(a){return 0===a.filter(function(a){return!Array.isArray(a)}).length}if(!c||!Array.isArray(c))throw new Error('Expected an array as the JMAP response for a "'+b+'" request.');if(0===c.length||!d(c))throw new Error('Expected an array of exactly 1 array element as the JMAP response for a "'+b+'" request.');var e=c[0][0],f=a._expectedResponseFor(b);if(e!==g.ERROR&&f&&e!==f)throw new Error('Expected "'+f+'" as the JMAP response for a "'+b+'" request, but got "'+e+'".');if(!c[0][1])throw new Error('The JMAP response for a "'+b+'" request should return some data.');return c}},{key:"capitalize",value:function(a){return a&&"string"==typeof a?a.charAt(0).toUpperCase()+a.substring(1):a}},{key:"fillURITemplate",value:function(b,c){return a.assertRequiredParameterIsPresent(b,"uri"),c?b.replace(/{(.+?)}/g,function(a,b){var d=c[b];return d?encodeURIComponent(d):a}):b}},{key:"appendQueryParameter",value:function(a,b,c){return a&&b&&c?a+(a.indexOf("?")>-1?"&":"?")+encodeURIComponent(b)+"="+encodeURIComponent(c):a}},{key:"nthElementOrDefault",value:function(a,b,c){return Array.isArray(a)&&b>=0&&a.length>b?a[b]:c}},{key:"_jsonArrayToModelList",value:function(a,b,c,d){return Array.isArray(c)?(d&&(c=c.filter(d)),c.map(b.fromJSONObject.bind(null,a))):[]}},{key:"_nullOrNewInstance",value:function(a,b){return a&&new b(a)||null}},{key:"_expectedResponseFor",value:function(a){return{getAccounts:"accounts",getMailboxes:"mailboxes",getMessageList:"messageList",getThreads:"threads",getMessages:"messages",setMessages:"messagesSet",setMailboxes:"mailboxesSet",getVacationResponse:"vacationResponse",setVacationResponse:"vacationResponseSet"}[a]}}]),a}();c.default=h,b.exports=c.default},{"./Constants":30}]},{},[1])(1)});